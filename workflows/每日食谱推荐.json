{
  "name": "æ¯æ—¥é£Ÿè°±æ¨è",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 7
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -400,
        200
      ],
      "id": "schedule-trigger",
      "name": "æ¯æ—¥7ç‚¹å®šæ—¶è§¦å‘"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "user-info",
              "name": "userInfo",
              "value": "è¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼š2äººå®¶åº­ï¼Œæˆå¹´äººï¼Œæ³¨é‡è¥å…»å‡è¡¡",
              "type": "string"
            },
            {
              "id": "diet-preference",
              "name": "dietPreference",
              "value": "è¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼šä¸åƒè¾£ï¼Œåçˆ±æ¸…æ·¡å£å‘³ï¼Œä¸æŒ‘é£Ÿ",
              "type": "string"
            },
            {
              "id": "current-date",
              "name": "currentDate",
              "value": "={{ $now.format('yyyyå¹´MMæœˆddæ—¥ dddd') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -200,
        200
      ],
      "id": "user-settings",
      "name": "ç”¨æˆ·è®¾ç½®"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "è¯·ä¸º{{ $json.currentDate }}åˆ¶å®šä¸‰é¤èœè°±",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸“ä¸šçš„è¥å…»å¸ˆå’Œé£Ÿè°±è§„åˆ’å¸ˆã€‚è¯·ä¸ºç”¨æˆ·åˆ¶å®šä»Šæ—¥ä¸‰é¤èœè°±ã€‚\n\nç”¨æˆ·ä¿¡æ¯ï¼š{{ $json.userInfo }}\né¥®é£Ÿåå¥½ï¼š{{ $json.dietPreference }}\næ—¥æœŸï¼š{{ $json.currentDate }}\n\nè¦æ±‚ï¼š\n1. åˆ¶å®šæ—©é¤ã€åˆé¤ã€æ™šé¤ä¸‰é¤èœè°±\n2. æ¯é¤åŒ…å«2-3é“èœ\n3. æ³¨é‡è¥å…»å‡è¡¡å’Œæ­é…\n4. è€ƒè™‘å­£èŠ‚æ€§é£Ÿæ\n5. æä¾›è¯¦ç»†çš„é£Ÿææ¸…å•\n6. ç®€è¦è¯´æ˜è¥å…»ä»·å€¼\n\nè¾“å‡ºæ ¼å¼ï¼šè¯·ä¸¥æ ¼æŒ‰ç…§JSONæ ¼å¼è¾“å‡ºï¼ŒåŒ…å«breakfastã€lunchã€dinnerå’Œingredientså­—æ®µã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        0,
        200
      ],
      "id": "ai-menu-generator",
      "name": "AIèœè°±ç”Ÿæˆå™¨"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.7,
          "topP": 0.9
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        0,
        400
      ],
      "id": "deepseek-model",
      "name": "DeepSeekæ¨¡å‹",
      "credentials": {
        "deepSeekApi": {
          "id": "peOp7pcjSxphhmmF",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"breakfast\": [\"å°ç±³ç²¥\", \"ç…®è›‹\", \"å’¸èœ\"],\n  \"lunch\": [\"ç±³é¥­\", \"çº¢çƒ§è‚‰\", \"æ¸…ç‚’å°ç™½èœ\", \"ç´«èœè›‹èŠ±æ±¤\"],\n  \"dinner\": [\"é¢æ¡\", \"è¥¿çº¢æŸ¿é¸¡è›‹\", \"å‡‰æ‹Œé»„ç“œ\"],\n  \"ingredients\": [\"å°ç±³\", \"é¸¡è›‹\", \"çŒªè‚‰\", \"å°ç™½èœ\", \"ç´«èœ\", \"é¢æ¡\", \"è¥¿çº¢æŸ¿\", \"é»„ç“œ\"],\n  \"nutrition\": \"è¥å…»å‡è¡¡ï¼ŒåŒ…å«è›‹ç™½è´¨ã€ç»´ç”Ÿç´ å’Œè†³é£Ÿçº¤ç»´\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        200,
        400
      ],
      "id": "structured-parser",
      "name": "ç»“æ„åŒ–è¾“å‡ºè§£æå™¨"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "formatted-menu",
              "name": "formattedMenu",
              "value": "={{ $json.output.currentDate }}ç¾é£Ÿèœå•\\n\\nğŸŒ… æ—©é¤ï¼š\\n{{ $json.output.breakfast.map(item => 'â€¢ ' + item).join('\\n') }}\\n\\nğŸ½ï¸ åˆé¤ï¼š\\n{{ $json.output.lunch.map(item => 'â€¢ ' + item).join('\\n') }}\\n\\nğŸŒ™ æ™šé¤ï¼š\\n{{ $json.output.dinner.map(item => 'â€¢ ' + item).join('\\n') }}\\n\\nğŸ›’ é‡‡è´­æ¸…å•ï¼š\\n{{ $json.output.ingredients.map(item => 'â€¢ ' + item).join('\\n') }}\\n\\nğŸ’¡ è¥å…»æç¤ºï¼š\\n{{ $json.output.nutrition }}",
              "type": "string"
            },
            {
              "id": "email-subject",
              "name": "emailSubject",
              "value": "={{ $json.output.currentDate }}æ¯æ—¥é£Ÿè°±æ¨è",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        400,
        200
      ],
      "id": "format-output",
      "name": "æ ¼å¼åŒ–è¾“å‡º"
    },
    {
      "parameters": {
        "text": "={{ $json.formattedMenu }}",
        "additionalFields": {
          "appendAttribution": false,
          "disable_notification": false,
          "parse_mode": "Markdown"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        600,
        100
      ],
      "id": "telegram-sender",
      "name": "Telegramå‘é€",
      "webhookId": "46e76bbd-7a14-4d0f-8528-07f55db2c2d9",
      "credentials": {
        "telegramApi": {
          "id": "5JwRrhgTJYtXI8UD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "subject": "={{ $json.emailSubject }}",
        "emailType": "text",
        "message": "={{ $json.formattedMenu }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        600,
        300
      ],
      "id": "gmail-sender",
      "name": "Gmailå‘é€",
      "webhookId": "d7e2dada-3ca1-4272-abe3-8eef1cf0b996",
      "credentials": {
        "gmailOAuth2": {
          "id": "è¯·é…ç½®Gmail OAuth2",
          "name": "Gmail account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "æ¯æ—¥7ç‚¹å®šæ—¶è§¦å‘": {
      "main": [
        [
          {
            "node": "ç”¨æˆ·è®¾ç½®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”¨æˆ·è®¾ç½®": {
      "main": [
        [
          {
            "node": "AIèœè°±ç”Ÿæˆå™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AIèœè°±ç”Ÿæˆå™¨": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–è¾“å‡º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeekæ¨¡å‹": {
      "ai_languageModel": [
        [
          {
            "node": "AIèœè°±ç”Ÿæˆå™¨",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "ç»“æ„åŒ–è¾“å‡ºè§£æå™¨": {
      "ai_outputParser": [
        [
          {
            "node": "AIèœè°±ç”Ÿæˆå™¨",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼åŒ–è¾“å‡º": {
      "main": [
        [
          {
            "node": "Telegramå‘é€",
            "type": "main",
            "index": 0
          },
          {
            "node": "Gmailå‘é€",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "saveExecutionProgress": true,
    "saveManualExecutions": true,
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "executionTimeout": 3600,
    "timezone": "UTC"
  },
  "versionId": "bbd27729-2dde-4003-9815-4c1fe740b94b",
  "meta": {
    "instanceId": "667f8e49cea6f05a4f2d4764a2ef083b44c681d7bcf3709cc71f85be90eeca2e"
  },
  "id": "fQQVeD1vawUL3Fqr",
  "tags": []
}